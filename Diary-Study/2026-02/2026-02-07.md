# å­¦ä¹ ç¬”è®° - 2026-02-07

## ğŸ“š ä¸»é¢˜ï¼šJS DOM æ“ä½œ

> **åˆ†ç±»ï¼š** JS åŸºç¡€ | **éš¾åº¦ï¼š** åˆçº§

---

## ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. DOM æ˜¯ä»€ä¹ˆï¼Ÿ

DOMï¼ˆDocument Object Modelï¼‰æ˜¯ HTML æ–‡æ¡£çš„ç¼–ç¨‹æ¥å£ï¼Œå®ƒå°† HTML æ–‡æ¡£è¡¨ç¤ºä¸ºæ ‘å½¢ç»“æ„ã€‚æ¯ä¸ª HTML å…ƒç´ éƒ½æ˜¯æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚

```
document (æ ¹èŠ‚ç‚¹)
â”œâ”€â”€ html
    â”œâ”€â”€ head
    â”‚   â”œâ”€â”€ title
    â”‚   â””â”€â”€ meta
    â””â”€â”€ body
        â”œâ”€â”€ div
        â”œâ”€â”€ p
        â””â”€â”€ button
```

### 2. é€‰æ‹©å…ƒç´ 

#### é€šè¿‡ ID é€‰æ‹©
```javascript
// è¿”å›å•ä¸ªå…ƒç´ ï¼ˆå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿”å› nullï¼‰
const element = document.getElementById('myId');
```

#### é€šè¿‡ç±»åé€‰æ‹©
```javascript
// è¿”å› HTMLCollectionï¼ˆç±»æ•°ç»„ï¼Œä¸æ˜¯çœŸæ­£çš„æ•°ç»„ï¼‰
const elements = document.getElementsByClassName('myClass');
const firstElement = elements[0];

// è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„
const elementArray = Array.from(document.getElementsByClassName('myClass'));
```

#### é€šè¿‡æ ‡ç­¾åé€‰æ‹©
```javascript
// è¿”å› HTMLCollection
const paragraphs = document.getElementsByTagName('p');
```

#### é€šè¿‡ CSS é€‰æ‹©å™¨ï¼ˆæ¨èï¼‰
```javascript
// querySelectorï¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ 
const element = document.querySelector('.class-name');
const element2 = document.querySelector('#id-name');
const element3 = document.querySelector('div.container > p.highlight');

// querySelectorAllï¼šè¿”å›æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ï¼ˆNodeListï¼‰
const elements = document.querySelectorAll('.class-name');
const buttons = document.querySelectorAll('button');

// NodeList æ”¯æŒforEach
buttons.forEach(btn => {
  console.log(btn);
});
```

### 3. ä¿®æ”¹å…ƒç´ å†…å®¹

#### ä¿®æ”¹æ–‡æœ¬å†…å®¹
```javascript
const p = document.querySelector('p');
p.textContent = 'æ–°çš„æ–‡æœ¬å†…å®¹';  // ä¸ä¼šè§£æ HTML
p.innerText = 'æ–°çš„æ–‡æœ¬å†…å®¹';    // ä¼šè§¦å‘é‡æ’ï¼Œè§£ææ ·å¼
```

#### ä¿®æ”¹ HTML å†…å®¹
```javascript
const div = document.querySelector('div');
div.innerHTML = '<strong>åŠ ç²—æ–‡å­—</strong><em>æ–œä½“æ–‡å­—</em>';

// âš ï¸ æ³¨æ„ï¼šinnerHTML æœ‰ XSS é£é™©ï¼Œä¸è¦ç›´æ¥æ’å…¥ç”¨æˆ·è¾“å…¥
// å®‰å…¨çš„åšæ³•ï¼š
function safeHTML(str) {
  return str
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;');
}
div.innerHTML = safeHTML(userInput);
```

### 4. ä¿®æ”¹å…ƒç´ æ ·å¼

#### ç›´æ¥ä¿®æ”¹ style å±æ€§
```javascript
const element = document.querySelector('.box');

// ä¿®æ”¹æ ·å¼ï¼ˆä½¿ç”¨é©¼å³°å‘½åï¼‰
element.style.backgroundColor = 'red';
element.style.fontSize = '20px';
element.style.margin = '10px 20px';
```

#### ä½¿ç”¨ classList æ“ä½œç±»å
```javascript
const element = document.querySelector('.box');

// æ·»åŠ ç±»å
element.classList.add('highlight');
element.classList.add('active', 'visible');

// ç§»é™¤ç±»å
element.classList.remove('hidden');

// åˆ‡æ¢ç±»åï¼ˆæœ‰å°±åˆ é™¤ï¼Œæ²¡æœ‰å°±æ·»åŠ ï¼‰
element.classList.toggle('active');

// æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªç±»å
if (element.classList.contains('highlight')) {
  console.log('å­˜åœ¨ highlight ç±»');
}

// æ›¿æ¢ç±»å
element.classList.replace('old-class', 'new-class');
```

### 5. ä¿®æ”¹å…ƒç´ å±æ€§

```javascript
const img = document.querySelector('img');

// è·å–å±æ€§
const src = img.getAttribute('src');

// è®¾ç½®å±æ€§
img.setAttribute('src', 'image.jpg');
img.setAttribute('alt', 'å›¾ç‰‡æè¿°');

// ç§»é™¤å±æ€§
img.removeAttribute('alt');

// å¯¹äºæŸäº›æ ‡å‡†å±æ€§ï¼Œå¯ä»¥ç›´æ¥è®¿é—®
img.src = 'image.jpg';
img.alt = 'å›¾ç‰‡æè¿°';
img.id = 'my-image';
```

### 6. äº‹ä»¶ç›‘å¬

#### åŸºæœ¬è¯­æ³•
```javascript
const button = document.querySelector('button');

// æ·»åŠ äº‹ä»¶ç›‘å¬
button.addEventListener('click', function(event) {
  console.log('æŒ‰é’®è¢«ç‚¹å‡»äº†');
  console.log('äº‹ä»¶å¯¹è±¡ï¼š', event);
});

// ä½¿ç”¨ç®­å¤´å‡½æ•°
button.addEventListener('click', (event) => {
  console.log(event.target);  // è§¦å‘äº‹ä»¶çš„å…ƒç´ 
});

// ç§»é™¤äº‹ä»¶ç›‘å¬ï¼ˆéœ€è¦ä¼ å…¥åŒä¸€ä¸ªå‡½æ•°å¼•ç”¨ï¼‰
function handleClick(event) {
  console.log('ç‚¹å‡»äº†');
}
button.addEventListener('click', handleClick);
button.removeEventListener('click', handleClick);
```

#### å¸¸è§äº‹ä»¶ç±»å‹
```javascript
const element = document.querySelector('.box');

// é¼ æ ‡äº‹ä»¶
element.addEventListener('click', () => {});      // ç‚¹å‡»
element.addEventListener('dblclick', () => {});    // åŒå‡»
element.addEventListener('mouseenter', () => {}); // é¼ æ ‡è¿›å…¥
element.addEventListener('mouseleave', () => {}); // é¼ æ ‡ç¦»å¼€
element.addEventListener('mousemove', () => {});  // é¼ æ ‡ç§»åŠ¨

// é”®ç›˜äº‹ä»¶
element.addEventListener('keydown', (e) => {
  console.log('æŒ‰ä¸‹çš„é”®ï¼š', e.key);
  console.log('æŒ‰é”®ä»£ç ï¼š', e.code);
});
element.addEventListener('keyup', () => {});      // æŒ‰é”®é‡Šæ”¾
element.addEventListener('keypress', () => {});    // æŒ‰é”®æŒ‰ä¸‹ï¼ˆå·²åºŸå¼ƒï¼‰

// è¡¨å•äº‹ä»¶
input.addEventListener('input', (e) => {
  console.log('è¾“å…¥å€¼ï¼š', e.target.value);
});
form.addEventListener('submit', (e) => {
  e.preventDefault();  // é˜»æ­¢è¡¨å•é»˜è®¤æäº¤
  console.log('è¡¨å•æäº¤');
});
```

#### äº‹ä»¶å†’æ³¡å’Œé˜»æ­¢
```javascript
// äº‹ä»¶å†’æ³¡ï¼šå­å…ƒç´ çš„äº‹ä»¶ä¼šå‘ä¸Šä¼ æ’­åˆ°çˆ¶å…ƒç´ 
const parent = document.querySelector('.parent');
const child = document.querySelector('.child');

parent.addEventListener('click', () => {
  console.log('çˆ¶å…ƒç´ è¢«ç‚¹å‡»');
});

child.addEventListener('click', (event) => {
  console.log('å­å…ƒç´ è¢«ç‚¹å‡»');
  event.stopPropagation();  // é˜»æ­¢äº‹ä»¶å†’æ³¡
});

// é˜»æ­¢é»˜è®¤è¡Œä¸º
const link = document.querySelector('a');
link.addEventListener('click', (event) => {
  event.preventDefault();  // é˜»æ­¢é“¾æ¥è·³è½¬
});
```

### 7. åˆ›å»ºå’Œåˆ é™¤å…ƒç´ 

#### åˆ›å»ºå…ƒç´ 
```javascript
// åˆ›å»ºæ–°å…ƒç´ 
const newDiv = document.createElement('div');
newDiv.textContent = 'æ–°çš„ div å…ƒç´ ';
newDiv.className = 'box highlight';
newDiv.id = 'unique-box';

// æ·»åŠ åˆ°æ–‡æ¡£
document.body.appendChild(newDiv);
```

#### æ’å…¥å…ƒç´ 
```javascript
const parent = document.querySelector('.parent');
const newElement = document.createElement('p');
newElement.textContent = 'æ–°æ®µè½';

// ä½œä¸ºæœ€åä¸€ä¸ªå­å…ƒç´ æ·»åŠ 
parent.appendChild(newElement);

// åœ¨æŒ‡å®šä½ç½®æ’å…¥
const referenceElement = document.querySelector('.reference');
parent.insertBefore(newElement, referenceElement);  // æ’å…¥åˆ° referenceElement ä¹‹å‰

// ä½¿ç”¨ insertAdjacentElementï¼ˆæ›´çµæ´»ï¼‰
referenceElement.insertAdjacentElement('beforebegin', newElement);  // åœ¨å…ƒç´ ä¹‹å‰
referenceElement.insertAdjacentElement('afterbegin', newElement);   // ä½œä¸ºç¬¬ä¸€ä¸ªå­å…ƒç´ 
referenceElement.insertAdjacentElement('beforeend', newElement);    // ä½œä¸ºæœ€åä¸€ä¸ªå­å…ƒç´ 
referenceElement.insertAdjacentElement('afterend', newElement);      // åœ¨å…ƒç´ ä¹‹å
```

#### åˆ é™¤å…ƒç´ 
```javascript
const element = document.querySelector('.to-remove');

// ä»çˆ¶å…ƒç´ ä¸­åˆ é™¤
element.parentNode.removeChild(element);

// æˆ–è€…ç›´æ¥è°ƒç”¨ removeï¼ˆç°ä»£æµè§ˆå™¨ï¼‰
element.remove();
```

---

## ğŸ”— çŸ¥è¯†å…³è”

### å‰ç½®çŸ¥è¯†
- **JS åŸºç¡€è¯­æ³•**ï¼šå˜é‡ã€å‡½æ•°ã€å¯¹è±¡ç­‰
- **HTML åŸºç¡€**ï¼šäº†è§£æ ‡ç­¾ã€å±æ€§ã€æ–‡æ¡£ç»“æ„

### åç»­å­¦ä¹ 
- **Vue æ¨¡æ¿è¯­æ³•**ï¼šVue çš„æŒ‡ä»¤ï¼ˆv-ifã€v-forã€v-bindï¼‰æœ¬è´¨ä¸Šä¹Ÿæ˜¯æ“ä½œ DOM
- **React åŸºç¡€**ï¼šä½¿ç”¨è™šæ‹Ÿ DOM æ¥é«˜æ•ˆç®¡ç† UI

### ç›¸å…³æ¦‚å¿µ
- **äº‹ä»¶å§”æ‰˜**ï¼šåˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œåœ¨çˆ¶å…ƒç´ ä¸Šç»Ÿä¸€ç®¡ç†å­å…ƒç´ äº‹ä»¶
- **DOM æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘ DOM æ“ä½œï¼Œä½¿ç”¨æ–‡æ¡£ç‰‡æ®µï¼ˆDocumentFragmentï¼‰

---

## ğŸ“ ç»ƒä¹ ä»»åŠ¡

### åŸºç¡€ç»ƒä¹ 
1. åˆ›å»ºä¸€ä¸ª HTML é¡µé¢ï¼ŒåŒ…å«ï¼š
   - ä¸€ä¸ªæ ‡é¢˜ï¼ˆ`<h1>`ï¼‰
   - ä¸€ä¸ªæŒ‰é’®
   - ä¸€ä¸ªç©ºå®¹å™¨ï¼ˆ`<div id="container">`ï¼‰

2. ä½¿ç”¨ JavaScript å®ç°ï¼š
   - ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå‘å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„æ®µè½ï¼ˆ`<p>`ï¼‰
   - æ¯ä¸ªæ®µè½æ˜¾ç¤ºå½“å‰çš„æ·»åŠ åºå·ï¼ˆå¦‚ï¼š"ç¬¬ 1 ä¸ªæ®µè½"ï¼‰
   - ç‚¹å‡»æ®µè½æ—¶ï¼Œæ”¹å˜å…¶èƒŒæ™¯é¢œè‰²

### è¿›é˜¶ç»ƒä¹ 
3. åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ï¼š
   - æ˜¾ç¤ºå½“å‰è®¡æ•°å€¼ï¼ˆä» 0 å¼€å§‹ï¼‰
   - æœ‰"å¢åŠ "å’Œ"å‡å°‘"æŒ‰é’®
   - è®¡æ•°ä¸ºè´Ÿæ•°æ—¶ï¼Œè®¡æ•°å€¼æ˜¾ç¤ºä¸ºçº¢è‰²

4. åˆ›å»ºä¸€ä¸ªå¾…åŠäº‹é¡¹åˆ—è¡¨ï¼š
   - è¾“å…¥æ¡† + æ·»åŠ æŒ‰é’®
   - åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å¾…åŠäº‹é¡¹
   - æ¯ä¸ªäº‹é¡¹æ—è¾¹æœ‰"å®Œæˆ"å’Œ"åˆ é™¤"æŒ‰é’®
   - å®Œæˆçš„äº‹é¡¹æ˜¾ç¤ºåˆ é™¤çº¿

---

## ğŸ“š å»¶ä¼¸é˜…è¯»

### MDN æ–‡æ¡£
- [Document å¯¹è±¡](https://developer.mozilla.org/zh-CN/docs/Web/API/Document)
- [Element å¯¹è±¡](https://developer.mozilla.org/zh-CN/docs/Web/API/Element)
- [Event å¯¹è±¡](https://developer.mozilla.org/zh-CN/docs/Web/API/Event)

### å®ç”¨å·¥å…·
- [JavaScript DOM Cheat Sheet](https://overapi.com/javascript-dom)

### è§†é¢‘æ•™ç¨‹
- ã€å¯é€‰ã€‘æ¨è B ç«™æˆ– YouTube ä¸Šå…³äº DOM æ“ä½œçš„å…¥é—¨è§†é¢‘

---

## ğŸ’¡ å­¦ä¹ æç¤º

1. **querySelector æ˜¯ä½ çš„å¥½æœ‹å‹**ï¼šå®ƒæ”¯æŒæ‰€æœ‰ CSS é€‰æ‹©å™¨ï¼Œéå¸¸å¼ºå¤§
2. **å¤šç”¨ classList**ï¼šæ¯”ç›´æ¥ä¿®æ”¹ className æ›´å®‰å…¨å’Œæ–¹ä¾¿
3. **æ³¨æ„ XSS é£é™©**ï¼šä½¿ç”¨ innerHTML æ—¶è¦å°å¿ƒï¼Œä¸è¦ç›´æ¥æ’å…¥ç”¨æˆ·è¾“å…¥
4. **äº‹ä»¶ç›‘å¬ä¼˜äº HTML å±æ€§**ï¼šé¿å…åœ¨ HTML ä¸­å†™ `onclick="..."`ï¼Œä½¿ç”¨ addEventListener
5. **è°ƒè¯•æŠ€å·§**ï¼šåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨ `console.log(event.target)` æŸ¥çœ‹è§¦å‘å…ƒç´ 

---

*å­¦ä¹ æ—¶é—´ï¼šçº¦ 30-45 åˆ†é’Ÿ*

---

## ğŸ¯ æµ‹éªŒé—®é¢˜

### é—®é¢˜ 1ï¼šé€‰æ‹©å…ƒç´ 

å‡è®¾æœ‰ä»¥ä¸‹ HTML ç»“æ„ï¼š
```html
<div class="container">
  <p id="intro">è¿™æ˜¯ä¸€ä¸ªæ®µè½</p>
  <p class="highlight">è¿™æ˜¯ç¬¬äºŒä¸ªæ®µè½</p>
  <button class="btn">ç‚¹å‡»æˆ‘</button>
</div>
```

è¯·ç”¨æœ€ç®€æ´çš„æ–¹å¼ï¼š
1. é€‰æ‹© id ä¸º `intro` çš„å…ƒç´ 
2. é€‰æ‹©æ‰€æœ‰ `class` ä¸º `highlight` çš„å…ƒç´ 
3. é€‰æ‹© `container` ä¸‹çš„ç¬¬ä¸€ä¸ªæŒ‰é’®

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```javascript
// 1. é€‰æ‹© id ä¸º intro çš„å…ƒç´ 
const intro = document.querySelector('#intro');
// æˆ–
const intro = document.getElementById('intro');

// 2. é€‰æ‹©æ‰€æœ‰ class ä¸º highlight çš„å…ƒç´ 
const highlights = document.querySelectorAll('.highlight');

// 3. é€‰æ‹© container ä¸‹çš„ç¬¬ä¸€ä¸ªæŒ‰é’®
const button = document.querySelector('.container button');
// æˆ–
const button = document.querySelector('.container .btn');
```
</details>

---

### é—®é¢˜ 2ï¼šä¿®æ”¹æ ·å¼å’Œç±»å

ç»™å®šä¸€ä¸ªå…ƒç´ ï¼š
```javascript
const box = document.querySelector('.box');
```

è¯·å®Œæˆä»¥ä¸‹æ“ä½œï¼š
1. å°†èƒŒæ™¯é¢œè‰²è®¾ç½®ä¸ºè“è‰²
2. æ·»åŠ ç±»å `active`
3. ç§»é™¤ç±»å `hidden`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
4. åˆ‡æ¢ç±»å `highlight`ï¼ˆæœ‰å°±åˆ é™¤ï¼Œæ²¡æœ‰å°±æ·»åŠ ï¼‰

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```javascript
const box = document.querySelector('.box');

// 1. è®¾ç½®èƒŒæ™¯é¢œè‰²
box.style.backgroundColor = 'blue';
// æˆ–
box.style.setProperty('background-color', 'blue');

// 2. æ·»åŠ ç±»å
box.classList.add('active');

// 3. ç§»é™¤ç±»å
box.classList.remove('hidden');

// 4. åˆ‡æ¢ç±»å
box.classList.toggle('highlight');
```
</details>

---

### é—®é¢˜ 3ï¼šäº‹ä»¶ç›‘å¬

åˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ—¶è¾“å‡ºæŒ‰é’®çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶é˜»æ­¢äº‹ä»¶å†’æ³¡ã€‚

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```javascript
// åˆ›å»ºæŒ‰é’®
const button = document.createElement('button');
button.textContent = 'ç‚¹å‡»æˆ‘';
document.body.appendChild(button);

// æ·»åŠ äº‹ä»¶ç›‘å¬
button.addEventListener('click', (event) => {
  console.log('æŒ‰é’®æ–‡æœ¬ï¼š', event.target.textContent);
  event.stopPropagation();  // é˜»æ­¢äº‹ä»¶å†’æ³¡
});

// æˆ–è€…ä½¿ç”¨å‡½æ•°å¼•ç”¨
function handleClick(event) {
  console.log('æŒ‰é’®æ–‡æœ¬ï¼š', event.target.textContent);
  event.stopPropagation();
}
button.addEventListener('click', handleClick);
```
</details>

---

**ç­”é¢˜æç¤º**ï¼šå…ˆè‡ªå·±æ€è€ƒï¼Œå†çœ‹ç­”æ¡ˆã€‚å¦‚æœä¸ç¡®å®šï¼Œå¯ä»¥å°è¯•åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œä»£ç éªŒè¯ï¼
