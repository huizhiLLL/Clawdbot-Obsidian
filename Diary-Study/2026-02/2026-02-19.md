# 2026-02-19 - SQL WHERE 和条件查询

## 📚 学习主题

**主题：** SQL WHERE 和条件查询
**类别：** SQL 基础
**难度：** 初级

---

## 🎯 核心知识点

### 1. WHERE 子句的作用

WHERE 子句用于过滤记录，只提取满足指定条件的记录。

**基本语法：**
```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

### 2. 比较运算符

| 运算符 | 说明 | 示例 |
|--------|------|------|
| `=` | 等于 | `WHERE age = 25` |
| `<>` 或 `!=` | 不等于 | `WHERE age <> 25` |
| `>` | 大于 | `WHERE age > 18` |
| `<` | 小于 | `WHERE age < 65` |
| `>=` | 大于等于 | `WHERE age >= 18` |
| `<=` | 小于等于 | `WHERE age <= 65` |

### 3. 逻辑运算符

| 运算符 | 说明 | 示例 |
|--------|------|------|
| `AND` | 所有条件都必须满足 | `WHERE age > 18 AND age < 65` |
| `OR` | 任意一个条件满足即可 | `WHERE city = '北京' OR city = '上海'` |
| `NOT` | 取反 | `WHERE NOT city = '北京'` |

### 4. 其他常用条件

**IN 运算符：** 检查值是否在列表中
```sql
SELECT * FROM users
WHERE city IN ('北京', '上海', '深圳');
```

**BETWEEN 运算符：** 检查值是否在范围内（包含边界值）
```sql
SELECT * FROM products
WHERE price BETWEEN 100 AND 500;
```

**LIKE 运算符：** 模糊匹配
```sql
-- % 表示任意数量的字符
SELECT * FROM users WHERE name LIKE '张%';  -- 以"张"开头
SELECT * FROM users WHERE name LIKE '%明';  -- 以"明"结尾
SELECT * FROM users WHERE email LIKE '%@gmail.com%';

-- _ 表示单个字符
SELECT * FROM users WHERE code LIKE 'A_00';
```

**IS NULL / IS NOT NULL：** 检查空值
```sql
SELECT * FROM users WHERE phone IS NULL;
SELECT * FROM users WHERE email IS NOT NULL;
```

---

## 🔗 知识关联

- **与 SELECT 的关系：** WHERE 是 SELECT 语句的一部分，在 FROM 之后、GROUP BY 之前执行
- **与 ORDER BY 的关系：** 先用 WHERE 过滤，再用 ORDER BY 排序
- **后续学习：** 学完 WHERE 后，可以深入学习 GROUP BY、HAVING、JOIN 等高级查询

---

## 📝 练习

### 练习 1：基本条件查询
查询年龄大于 20 岁的所有用户：
```sql
SELECT * FROM users WHERE age > 20;
```

### 练习 2：多个条件（AND）
查询年龄在 18 到 30 岁之间、且性别为'男'的用户：
```sql
SELECT * FROM users
WHERE age >= 18 AND age <= 30 AND gender = '男';
```

### 练习 3：多个条件（OR）
查询居住在北京或上海的用户：
```sql
SELECT * FROM users
WHERE city = '北京' OR city = '上海';
```

### 练习 4：使用 IN
查询等级为 VIP1、VIP2、VIP3 的用户：
```sql
SELECT * FROM users WHERE level IN ('VIP1', 'VIP2', 'VIP3');
```

### 练习 5：使用 LIKE
查询邮箱使用 gmail 的用户：
```sql
SELECT * FROM users WHERE email LIKE '%@gmail.com';
```

### 练习 6：综合练习
查询以下条件的用户：
- 年龄 >= 18
- 城市 = 北京 或 上海 或 深圳
- 等级不是 'guest'
```sql
SELECT * FROM users
WHERE age >= 18
  AND city IN ('北京', '上海', '深圳')
  AND level != 'guest';
```

---

## 📚 延伸阅读

### 实践建议
1. **优先使用 IN 而不是多个 OR：** `city IN ('A', 'B')` 比 `city = 'A' OR city = 'B'` 更清晰
2. **注意 NULL 的处理：** `NULL = NULL` 返回的是 FALSE，所以必须用 `IS NULL`
3. **LIKE 的性能：** 前缀通配符（`%abc`）会导致全表扫描，尽量避免

### 推荐练习
- 用 WHERE 子句查询各种条件的数据
- 尝试组合多个运算符构建复杂条件
- 在实际项目中应用 WHERE 过滤数据

---

**📅 学习日期：** 2026-02-19
**⏰ 预计学习时间：** 45 分钟
