# 2026-02-01 - JS 变量声明

📚 今日学习主题：JS 变量声明（let/const/var）

---

📌 核心知识点

### var - 旧时代的遗留
- **函数作用域**：变量在整个函数内有效（不受块级作用域限制）
- **变量提升**：声明会被提升到函数顶部（但赋值不会）
- **可重复声明**：同一个变量名可以多次声明
- **全局属性**：在全局作用域声明的 var 会成为 window 的属性

**示例：**
```javascript
function test() {
  console.log(x); // undefined（变量提升）
  var x = 10;
  console.log(x); // 10
}

for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100);
}
// 输出：3 3 3（因为 var 是函数作用域）
```

### let - 现代首选
- **块级作用域**：变量只在 `{}` 块内有效
- **暂时性死区**：在声明前访问会报错
- **不可重复声明**：同一作用域内不能重复声明
- **没有变量提升**：必须先声明后使用

**示例：**
```javascript
let x = 10;

{
  let x = 20; // 新的块级作用域
  console.log(x); // 20
}

console.log(x); // 10

// 重复声明会报错
// let x = 30; // SyntaxError
```

### const - 常量声明
- **块级作用域**：与 let 相同
- **必须初始化**：声明时必须赋值
- **不可重新赋值**：但对象/数组的属性可以修改
- **最佳实践**：默认使用 const，需要重新赋值时用 let

**示例：**
```javascript
const PI = 3.14159;
// PI = 3.14; // TypeError

const user = { name: '张三' };
user.name = '李四'; // ✅ 允许修改属性
// user = {}; // ❌ 不允许重新赋值
```

---

## 🎯 与个人背景/项目/热点的关联

### 你的场景
在 Vue3 组件开发、Node.js 后端开发中，你都需要声明变量。使用 `const` 和 `let` 可以避免许多常见的 bug。

### 应用示例
```javascript
// Vue3 Composition API
import { ref, computed } from 'vue';

const count = ref(0); // 响应式引用，不会重新赋值
const doubleCount = computed(() => count.value * 2); // 计算属性

function increment() {
  count.value++; // 修改 ref 的值
}

// Node.js 路由处理
const express = require('express'); // 不变，用 const
const app = express(); // 不变，用 const

app.get('/api/users', (req, res) => {
  const userId = req.query.id; // 不变，用 const
  let users = []; // 可能需要重新赋值，用 let

  // ... 处理逻辑
});
```

---

## 🚀 快速练习（15 分钟）

### 练习 1：作用域测试
预测以下代码的输出：

```javascript
var a = 1;
let b = 2;
const c = 3;

{
  var a = 10;
  let b = 20;
  const c = 30;
  console.log('内部:', a, b, c);
}

console.log('外部:', a, b, c);
```

**答案：**
```
内部: 10 20 30
外部: 10 2 3
```
解析：`var` 是函数作用域，会被外部的 `a` 覆盖；`let` 和 `const` 是块级作用域，互不影响。

---

### 练习 2：修复代码
找出并修复以下代码的问题：

```javascript
if (true) {
  var i = 0;
  for (var i = 0; i < 3; i++) {
    console.log(i);
  }
  console.log('循环后 i =', i);
}
```

**答案：**
```javascript
if (true) {
  let i = 0; // 改为 let
  for (let i = 0; i < 3; i++) { // 改为 let，块级作用域
    console.log(i);
  }
  console.log('循环后 i =', i); // 输出 0（外部的 let i）
}
```
或者简化为：
```javascript
for (let i = 0; i < 3; i++) {
  console.log(i);
}
```

---

### 练习 3：对象修改
```javascript
const config = {
  apiUrl: 'https://api.example.com',
  timeout: 5000
};

// 修改 timeout 为 10000
config.timeout = 10000; // ✅ 允许修改对象属性

// 添加新属性
config.retry = 3; // ✅ 允许添加新属性

// 尝试重新赋值
// config = {}; // ❌ 报错：Assignment to constant variable
```

---

## 📚 延伸阅读

1. [MDN - var](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/var)
2. [MDN - let](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/let)
3. [MDN - const](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/const)
4. [ES6 变量声明详解](https://es6.ruanyifeng.com/#docs/let)

---

## 💡 学习建议

1. **5 分钟**：理解 var、let、const 的三大区别（作用域、提升、重复声明）
2. **5 分钟**：完成练习题，特别是练习 2 的代码修复
3. **5 分钟**：在 VS Code 中自己写几段代码测试一下
4. **最佳实践**：从今天开始，代码中默认使用 `const`，需要重新赋值时用 `let`，完全不用 `var`

---

**学习时长建议：** 15 分钟
**难度：** ⭐☆☆☆☆（基础）

---

## 🤔 每日测验（晚上 22:00）

### 1. 今天学了什么主题？
[请在此填写]

### 2. var、let、const 的主要区别是什么？
[请在此填写]

### 3. 有什么收获？
[请在此填写]

### 4. 有什么疑问吗？
[请在此填写]

### 5. 完成了练习吗？
[请在此填写]

---

**📝 填写完请回复"填完了"，我会检查你的答案并更新总结。**
