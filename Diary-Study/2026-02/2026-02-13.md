---
date: 2026-02-13
topic: Vue 组件通信（props/emit）
category: Vue 基础
difficulty: beginner
status: in-progress
---

# Vue 组件通信（props/emit）

## 核心知识点

### Props - 父传子

Props 是父组件向子组件传递数据的方式，是单向数据流。

**子组件接收 props：**
```vue
<script setup>
const props = defineProps({
  title: String,
  count: {
    type: Number,
    default: 0
  },
  user: {
    type: Object,
    required: true
  }
})
</script>
```

**父组件传递 props：**
```vue
<script setup>
import ChildComponent from './ChildComponent.vue'

const userData = {
  name: '会枝',
  age: 20
}
</script>

<template>
  <ChildComponent title="标题" :count="5" :user="userData" />
</template>
```

**Props 类型：**
- String, Number, Boolean, Array, Object, Function, Symbol
- 支持自定义类型验证

### Emit - 子传父

Emit 是子组件向父组件传递数据的方式，用于触发父组件的方法。

**子组件发出事件：**
```vue
<script setup>
const emit = defineEmits(['update', 'delete'])

function handleClick() {
  emit('update', { id: 1, value: 'new value' })
  emit('delete', 1)
}
</script>

<template>
  <button @click="handleClick">点击</button>
</template>
```

**父组件监听事件：**
```vue
<script setup>
import ChildComponent from './ChildComponent.vue'

function handleUpdate(payload) {
  console.log('更新:', payload)
}

function handleDelete(id) {
  console.log('删除:', id)
}
</script>

<template>
  <ChildComponent @update="handleUpdate" @delete="handleDelete" />
</template>
```

### Props 的只读性

Props 在子组件中是只读的，不应该直接修改：

```vue
<!-- ❌ 错误 -->
<script setup>
const props = defineProps(['count'])
props.count++ // 不要这样做！
</script>

<!-- ✅ 正确 -->
<script setup>
const props = defineProps(['count'])
const localCount = ref(props.count)
</script>
```

## 关联

- **Vue 模板语法** - props 使用插值语法显示
- **Vue 常用指令** - v-on 用于监听 emit 事件
- **Vue 组件基础** - props/emit 是组件间通信的基础

## 练习

### 练习 1：计数器组件

创建一个 Counter 组件：
- 接收初始值 props
- 提供 + 和 - 按钮
- 通过 emit 通知父组件计数值变化

### 练习 2：待办事项

创建 TodoList 组件：
- 接收待办列表作为 props
- 提供删除功能，通过 emit 传递要删除的 ID

### 练习 3：产品卡片

创建 ProductCard 组件：
- 接收产品信息（名称、价格、图片）
- 点击按钮通过 emit 触发"加入购物车"事件

## 延伸阅读

- [Vue Props 文档](https://cn.vuejs.org/guide/components/props.html)
- [Vue Events 文档](https://cn.vuejs.org/guide/components/events.html)
- [组件通信最佳实践](https://cn.vuejs.org/guide/components/props.html#prop-casing)
