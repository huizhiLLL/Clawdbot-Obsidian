# 学习笔记：Vue 常用指令

**日期：** 2026-02-10
**分类：** Vue 基础
**难度：** Beginner
**主题：** Vue 常用指令

---

## 核心知识点

### 1. v-if - 条件渲染

**作用：** 根据条件决定是否渲染元素

```vue
<template>
  <div>
    <p v-if="isVisible">这段话会显示</p>
    <p v-else-if="isHidden">这段话不会显示</p>
    <p v-else>都不满足时显示</p>
  </div>
</template>

<script setup>
const isVisible = true
const isHidden = false
</script>
```

**要点：**
- v-if 会完全移除或重新创建 DOM 元素
- 切换开销较大，适合条件不常改变的场景
- 可以配合 v-else-if 和 v-else 使用

### 2. v-for - 列表渲染

**作用：** 遍历数组或对象生成多个元素

```vue
<template>
  <ul>
    <li v-for="item in items" :key="item.id">
      {{ item.name }} - {{ item.price }}元
    </li>
  </ul>

  <div v-for="(value, key, index) in user" :key="key">
    {{ index }}: {{ key }} = {{ value }}
  </div>
</template>

<script setup>
const items = [
  { id: 1, name: '苹果', price: 5 },
  { id: 2, name: '香蕉', price: 3 },
  { id: 3, name: '橙子', price: 4 }
]

const user = {
  name: '张三',
  age: 25,
  city: '北京'
}
</script>
```

**要点：**
- 必须配合 `:key` 使用，提高渲染性能
- key 应该是唯一且稳定的值（通常使用 id）
- 参数顺序：`(item, index)` for array, `(value, key, index)` for object

### 3. v-bind - 属性绑定

**作用：** 动态绑定 HTML 属性或组件 props

```vue
<template>
  <!-- 完整语法 -->
  <img v-bind:src="imageUrl" v-bind:alt="imageAlt">

  <!-- 缩写语法 -->
  <img :src="imageUrl" :alt="imageAlt">

  <!-- 绑定多个属性 -->
  <div v-bind="attrs">内容</div>

  <!-- 绑定 class -->
  <div :class="{ active: isActive, 'text-red': isRed }">
    动态 class
  </div>

  <!-- 绑定 style -->
  <div :style="{ color: textColor, fontSize: fontSize + 'px' }">
    动态 style
  </div>
</template>

<script setup>
const imageUrl = '/logo.png'
const imageAlt = 'Logo'
const attrs = {
  id: 'my-div',
  class: 'container',
  'data-value': 123
}
const isActive = true
const isRed = false
const textColor = 'blue'
const fontSize = 16
</script>
```

**要点：**
- `:` 是 `v-bind:` 的缩写
- 可以绑定多个属性到一个元素（使用对象展开）
- class 和 style 支持特殊语法（数组、对象）

### 4. v-on - 事件监听

**作用：** 监听 DOM 事件或组件事件

```vue
<template>
  <!-- 完整语法 -->
  <button v-on:click="handleClick">点击我</button>

  <!-- 缩写语法 -->
  <button @click="handleClick">点击我</button>

  <!-- 传递参数 -->
  <button @click="sayHello('会枝')">打招呼</button>

  <!-- 获取事件对象 -->
  <button @click="handleEvent($event)">获取事件</button>

  <!-- 修饰符 -->
  <form @submit.prevent="handleSubmit">
    <input @keyup.enter="handleEnter" />
    <button type="submit">提交</button>
  </form>

  <!-- 多个事件 -->
  <button @click="handleClick" @mouseover="handleHover">
    多个事件
  </button>
</template>

<script setup>
const handleClick = () => {
  console.log('按钮被点击了！')
}

const sayHello = (name) => {
  console.log(`你好，${name}！`)
}

const handleEvent = (event) => {
  console.log('事件对象：', event)
}

const handleSubmit = () => {
  console.log('表单提交（阻止默认行为）')
}

const handleEnter = () => {
  console.log('回车键被按下')
}

const handleHover = () => {
  console.log('鼠标悬停')
}
</script>
```

**要点：**
- `@` 是 `v-on:` 的缩写
- 常用修饰符：
  - `.prevent` - 阻止默认行为
  - `.stop` - 阻止事件冒泡
  - `.capture` - 事件捕获阶段触发
  - `.self` - 只有事件源是自身时触发
  - `.once` - 只触发一次
- 键盘修饰符：`.enter`, `.tab`, `.esc`, `.space`, `.up`, `.down` 等

---

## 知识关联

- **v-bind 和 v-on 的缩写：** `:` 和 `@` 是 Vue 中最常用的简写，务必记住
- **v-if 和 v-for 优先级：** Vue 3 中 v-if 优先级更高，建议避免同时使用
- **Composition API：** 在 `<script setup>` 中定义响应式数据，与指令配合使用

---

## 练习题

### 1. v-if 练习

创建一个登录/注册切换组件，根据状态显示不同的表单。

### 2. v-for 练习

渲染一个商品列表，包含商品名称、价格和购买按钮。点击购买按钮后，从列表中移除该商品。

### 3. v-bind 练习

创建一个图片轮播组件，根据当前索引动态显示对应的图片和指示器。

### 4. v-on 练习

实现一个计数器，包含增加、减少、重置三个按钮，并限制计数值范围在 0-100 之间。

---

## 延伸阅读

- [Vue 官方文档 - 指令](https://cn.vuejs.org/api/built-in-directives.html)
- [Vue 官方文档 - 模板语法](https://cn.vuejs.org/guide/essentials/template-syntax.html)
- [Vue 官方文档 - 事件处理](https://cn.vuejs.org/guide/essentials/event-handling.html)
- [Vue 官方文档 - 列表渲染](https://cn.vuejs.org/guide/essentials/list.html)
- [Vue 官方文档 - 条件渲染](https://cn.vuejs.org/guide/essentials/conditional.html)

---

**学习状态：** 📖 进行中
**下次复习：** 2026-02-13

---

## 📝 测验问题

### 问题 1：v-if 和 v-show 的区别是什么？

A. 没有区别，用法完全一样
B. v-if 会移除 DOM 元素，v-show 只是隐藏（display: none）
C. v-if 只是隐藏，v-show 会移除 DOM 元素
D. v-if 用于显示，v-show 用于隐藏

### 问题 2：以下关于 v-for 中 key 的说法，哪项是正确的？

A. key 是可选的，可以不设置
B. key 应该使用索引作为值
C. key 应该使用唯一且稳定的值（如 id）
D. key 只能在数组中使用，对象中不需要

### 问题 3：以下代码中，点击按钮后输出的值是什么？

```vue
<template>
  <button @click="increment">点击</button>
  <p>{{ count }}</p>
</template>

<script setup>
import { ref } from 'vue'

const count = ref(0)

const increment = () => {
  count.value++
  console.log(count.value)
}
</script>
```

A. 0
B. 1
C. undefined
D. 报错

---

**测验时间：** 2026-02-10 22:00
**答题状态：** ⏳ 等待答题
